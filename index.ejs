<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="js/jquerymodal/jquery.modal.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="css/jquerymodal/jquery.modal.css" type="text/css" media="screen" />

<script>
    function videoEnded(test) {
        $('#closemodal').click();
        localStorage.setItem(test, true);
    }
    var items = [];
$.ajax({ 
    type: 'GET', 
    url: 'js/data.json', 
    data: { get_param: 'value' }, 
    dataType: 'json',
    cache: false,
    success: function (data) { 
        $.each(data, function(index, element) {
            if (localStorage.getItem('ex0') != null) {
                $(".figure").html("Hello <b>world</b>!");
            }
            items.push( "\
                <div class='video'> \
                    <figure> \
                        <a href='#ex"+index+"' rel='modal:open'> \
                            <img class='thumbnail' src='" + element.thumbnail + "'> \
                        </a> \
                        <a id='closemodal' href='#ex"+index+"' rel='modal:close'></a> \
                        <figcaption id='caption"+index+"'>"+element.label+"</figcaption> \
                    </figure> \
                    <div class = 'videomodal' id='ex"+index+"' style='display:none;'> \
                        <video controls onended='videoEnded(\"ex"+index+"\")'> \
                          <source src='"+element.video+"' type='video/mp4'> \
                        Your browser does not support the video tag. \
                        </video> \
                    </div> \
                </div>" );
        });
        
        $( "<div/>", {
            "class": "videos-container",
            html: items.join( "" )
          }).appendTo( "#container" );
            }
});
</script>


<section class="video-library fade-in">
  <div class="container" id="container">
  </div>
</section>

<script>

$(window).load(function(){
if (localStorage.getItem('ex0') != null) {
    $('#caption0').html('<b>what</b>')
}
});
</script>
